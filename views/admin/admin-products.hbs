<head>
    <link rel="stylesheet" href="/stylesheets/admin/admin-home.css">
</head>

<div class="dropdown bg-black pb-1">
    <button class="btn text-white dropdown-toggle  bg-black" type="button" data-bs-toggle="dropdown"
        aria-expanded="false">
        ADMIN
    </button>
    <ul class="dropdown-menu bg-black profile">
        <li><a class="dropdown-item" href="/admin">Home</a></li>
        <li><a class="dropdown-item" href="/admin/products">Products</a></li>
        <li><a class="dropdown-item" href="/admin/users">Customers</a></li>
        <li><a class="dropdown-item" href="/admin/orders">Orders</a></li>
        <li><a class="dropdown-item" href="/admin/coupons">Coupons</a></li>
        <li><a class="dropdown-item" href="/admin/banners">Banners</a></li>
    </ul>
    <span class="float-end"><a href="/admin/logout" title="logout"><img src="/images/user/logout.png" class="logout"
                alt=""></a></span>
</div>

{{!-- add category --}}

<div class="w-100 d-flex justify-content-end">
    <button class="btn bg-dark text-light h-25 m-3" onclick="addCat()" id="addcat">ADD CATEGORY</button>
    <div class=" mt-3 me-5 border-1 border-black cat-div"  id="catbox"
        style="width: 250px;height: 150px;">
        <form action="">
            <label for="" class="form-label fw-bolder">Category</label>
            <input type="text" name="name" class="form-control mb-4" >
            <button type="submit" class="btn bg-success text-light h-25 me-4">ADD</button> <a
                href="/admin/products"><button type="button" class="btn bg-danger text-light h-25" onclick="canCat()">CANCEL</button></a>
        </form>
    </div>
</div>

<div class=" w-100 h-75 d-flex justify-content-center">

    <div class="mt-3  w-75 h-100">
        <div class="search  w-100">
            <form action="/admin/get-product" method="get"
                class="w-100 d-flex justify-content-center align-items-center m-4">
                <input type="search" class="w-25 m-1 p-1 rounded-3" name="product">
                <button class="btn border-3 border-dark h-25" type="submit">Search</button>
            </form>
        </div>
        <table class="table">
            <thead>
                <tr class="text-center">
                    <th scope="col"></th>
                    <th scope="col">Name</th>
                    <th scope="col">Category</th>
                    <th scope="col">Description</th>
                    <th scope="col">Price</th>
                    <th scope="col">Stock</th>
                    <th scope="col">Status</th>
                    <th scope="col">Options</th>
                </tr>
            </thead>
            <tbody class="table-group-divider">
                {{#each products}}
                <tr class="text-center">
                    <th scope="row"><img src="/images/products/{{this._id}}.jpg" class="rounded-5"
                            style="width: 40px;height: 40px;" alt=""></th>
                    <td>{{this.name}}</td>
                    <td>{{this.category}}</td>
                    <td>{{this.description}}</td>
                    <td>â‚¹{{this.price}}</td>
                    <td class="stock">{{this.stock}}</td>
                    <td>

                        <span
                            class="bg-success p-1 w-50 text-decoration-none bg-opacity-75 text-light rounded-4 instock">YES</span>

                        <span
                            class="bg-danger p-1  text-decoration-none bg-opacity-75 text-light rounded-4 outstock ">NO</span>


                    </td>
                    <td><a href="/admin/edit-product/{{this._id}}"><img src="/images/admin/edit-icon.svg"
                                style="width: 25px;" class="me-2" alt=""></a>
                        <a href="/admin/delete-product/{{this._id}}"
                            onclick="return confirm('Are you want to delete {{this.name}} ?')"><img
                                src="/images/admin/delete-icon.svg" style="width: 20px;" alt=""></a>
                    </td>
                </tr>
                {{/each}}
            </tbody>
        </table>
        <nav aria-label="Page navigation example" class="d-none d-lg-block">
            <ul class="pagination float-end">
                <li class="page-item">
                    <a class="page-link" href="#" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="#" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            </ul>
        </nav>
        <a href="/admin/add-product" style="text-decoration: none;" class="fs-3 pb-5"><button
                class="btn bg-black w-100 text-white"><span class="fw-bolder">ADD PRODUCT</span></button></a>
    </div>
</div>

<script>
    isStock();
    function isStock() {
        var stock1 = document.getElementsByClassName('stock');
        var instock = document.getElementsByClassName('instock');
        var outstock = document.getElementsByClassName('outstock');
        for (var i = 0; i < stock1.length; i++) {
            if (parseInt(stock1[i].innerHTML) !== 0) {
                outstock[i].style.display = 'none'
            } else {
                instock[i].style.display = 'none'
            }
        }
    }
    var cat = document.getElementById('addcat')
    var box = document.getElementById('catbox')
    
    function addCat() {
        cat.style.display = 'none'
        box.classList.add('cat-div1')
    }
    function canCat() {
        box.classList.remove('cat-div1')
        cat.style.display ='block'
    }
</script>